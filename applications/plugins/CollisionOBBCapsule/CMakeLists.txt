cmake_minimum_required(VERSION 3.12)
project(CollisionOBBCapsule VERSION 1.0 LANGUAGES CXX)

# List all files
set(COLLISIONOBBCAPSULE_SRC_DIR src/CollisionOBBCapsule)
set(HEADER_FILES
    ${COLLISIONOBBCAPSULE_SRC_DIR}/config.h.in
    ${COLLISIONOBBCAPSULE_SRC_DIR}/init.h    
    ${COLLISIONOBBCAPSULE_SRC_DIR}/BaseIntTool.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrUtility3.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrUtility3.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrMeshUtility.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrMeshUtility.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/MeshIntTool.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/MeshIntTool.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBContactMapper.h    
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBIntTool.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBModel.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBModel.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrOBBOBB.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrOBBOBB.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrSphereOBB.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrSphereOBB.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrTriangleOBB.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrTriangleOBB.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBIntersection.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/Intersector.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleIntTool.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleIntTool.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleModel.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleModel.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrCapsuleOBB.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrCapsuleOBB.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/RigidCapsuleModel.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/RigidCapsuleModel.inl
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleContactMapper.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleIntersection.h
    )

set(SOURCE_FILES
    ${COLLISIONOBBCAPSULE_SRC_DIR}/init.cpp        
    ${COLLISIONOBBCAPSULE_SRC_DIR}/BaseIntTool.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrUtility3.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrMeshUtility.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/MeshIntTool.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBIntersection.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBContact.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBContactMapper.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBContactMapper.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrOBBOBB.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrSphereOBB.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBIntTool.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/OBBModel.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrTriangleOBB.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleIntersection.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleContact.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleContactMapper.h
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleContactMapper.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleIntTool.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleModel.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/IntrCapsuleOBB.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/RigidCapsuleModel.cpp
    ${COLLISIONOBBCAPSULE_SRC_DIR}/CapsuleIntersection.cpp
    )

find_package(Sofa.Component.Collision REQUIRED)
add_library(${PROJECT_NAME} SHARED ${HEADER_FILES} ${SOURCE_FILES})

target_link_libraries(${PROJECT_NAME} PUBLIC Sofa.Component.Collision)

sofa_create_package_with_targets(
    PACKAGE_NAME ${PROJECT_NAME}
    PACKAGE_VERSION ${PROJECT_VERSION}
    TARGETS ${PROJECT_NAME} AUTO_SET_TARGET_PROPERTIES
    INCLUDE_SOURCE_DIR "src"
    INCLUDE_INSTALL_DIR ${PROJECT_NAME}
    RELOCATABLE "plugins"
)
